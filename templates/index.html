{% extends "layout.html" %}

{% block content %}
<style>
    .alert-box {
        padding: 15px;
        margin-bottom: 20px;
        border: 1px solid transparent;
        border-radius: 4px;
    }
    .alert-error {
        color: #721c24;
        background-color: #f8d7da;
        border-color: #f5c6cb;
    }
    .alert-success {
        color: #155724;
        background-color: #d4edda;
        border-color: #c3e6cb;
    }
    .btn-add {
        display: inline-block;
        background-color: #5bc0de;
        color: white;
        padding: 10px 15px;
        text-decoration: none;
        border-radius: 5px;
        margin-bottom: 15px;
    }
</style>

<div class="container">
    <h1>Blog Posts</h1>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="alert-box {% if category == 'error' %}alert-error{% else %}alert-success{% endif %}">
            <strong>แจ้งเตือน:</strong> {{ message }}
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <a class="btn-add" href="{{ url_for('create') }}">Add New Post</a>

    {% for post in posts %}
    <div class="post">
        <h2>{{ post.title }}</h2>
        <p>{{ post.content }}</p>
        <div class="meta">
            Created at: {{ post.created_at.strftime('%d %b %Y, %I:%M %p') }}
        </div>
        
        <a class="btn edit-btn" href="/edit/{{ post.id }}">Edit</a>
        <a class="btn delete-btn" href="/delete/{{ post.id }}" onclick="return confirm('Are you sure you want to delete this item?');">Delete</a>
    </div>
    <hr> {% endfor %}

</div>
{% endblock %}